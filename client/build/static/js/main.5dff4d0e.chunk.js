(this.webpackJsonpmvp=this.webpackJsonpmvp||[]).push([[0],{33:function(e,t,a){e.exports=a(63)},38:function(e,t,a){},57:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(31),r=a.n(c),l=(a(38),a(10)),o=a(1),i=a(9),u=a.n(i),m=a(17),d=a(12),p=a(13),h=a(14),f=a(16),g=a(15),b=a(7),E=a.n(b),y=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={userID:"",loggedIn:"",balance:0,userAddress:"",sendUserId:"",amount:"",stocks:[],stockStatus:"",sendMimStatus:"",userStocks:[],companyBalance:""},e.stockTemplate=e.state.stocks.map((function(e,t){return console.log(e),console.log("running map ftn"),s.a.createElement("li",{key:t,className:"list-group-item justify-content-between align-items-center"},e.symbol,s.a.createElement("span",{className:"badge badge-primary badge-pill"},e.price),s.a.createElement("a",{href:"/",className:"btn btn-primary mr-3 pl-3 pr-3"},"Buy"))})),e.renderUserStocks=function(){return s.a.createElement("ul",{className:"list-group list-group-flush"},e.state.userStocks.map((function(t,a){return s.a.createElement("li",{key:a,className:"list-group-item text-left"},t.stock," Purchase Price ",t.cost,s.a.createElement("a",{href:"#",className:"btn btn-secondary ml-5 pl-3 pr-3 text-right",onClick:function(t){e.sellStock(t,a)}},"Sell"))})))},e.sellStock=function(t,a){t.preventDefault();var n={id:e.state.userStocks[a]._id,cost:e.state.userStocks[a].cost,address:e.state.userAddress};E()({url:"/sellStock",method:"post",data:n}).then((function(e){console.log(e)})).catch((function(e){return console.log(e)}))},e.handleChange=function(t){e.setState(Object(d.a)({},t.target.name,t.target.value)),console.log(e.state)},e.signIn=function(t){t.preventDefault(),E()({url:"/signIn",method:"post",data:{userID:e.state.userID}}).then((function(t){console.log(t),e.setState({userAddress:t.data.address});var a={address:t.data.address};console.log(t.data.address),E()({url:"/getBalance",method:"post",data:a}).then((function(t){e.setState({balance:t.data.userBalance,companyBalance:t.data.companyBalance}),console.log(e.state.balance);var a={userID:e.state.userID};E()({url:"/getStocks",method:"post",data:a}).then((function(t){console.log(t),e.setState({loggedIn:"true",userStocks:t.data})})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))})).catch((function(e){return console.log(e)}))},e.signOut=function(t){t.preventDefault(),e.setState({userID:"",loggedIn:"",balance:0,userAddress:"",sendUserId:"",amount:"",sendMimStatus:"",userStocks:[],companyBalance:""})},e.sendMiM=function(t){t.preventDefault(),e.setState({sendMimStatus:""});var a={userID:e.state.sendUserId,amount:e.state.amount};E()({url:"/sendMiM",method:"post",data:a}).then((function(t){console.log(t),e.setState({sendMimStatus:"MiM sucessfully sent to account"})})).catch((function(t){console.log(t.response.data.error),e.setState({sendMimStatus:t.response.data.error})}))},e.refreshBalance=function(t){t.preventDefault(),e.setState({balance:":--",companyBalance:":--",sendMimStatus:""});var a={address:e.state.userAddress};E()({url:"/getBalance",method:"post",data:a}).then((function(t){e.setState({balance:t.data.userBalance,companyBalance:t.data.companyBalance})})).catch((function(e){return console.log(e)}))},e.buyStock=function(t,a,n){t.preventDefault();var s={userID:e.state.userID,stock:a,cost:n,amount:"1",addressS:e.state.userAddress};E()({url:"/purchaseStock",method:"post",data:s}).then((function(e){console.log(e)})).catch((function(e){return console.log(e)}))},e.refreshStock=function(t){t.preventDefault(),e.setState({});var a={userID:e.state.userID};E()({url:"/getStocks",method:"post",data:a}).then((function(t){console.log(t),e.setState({userStocks:t.data})})).catch((function(e){console.log(e)}))},e}return Object(h.a)(a,[{key:"stocksGet",value:function(){var e=Object(m.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var a=[],n=0;["IBM","GOOGL","AAPL"].forEach(function(){var t=Object(m.a)(u.a.mark((function t(s){var c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={symbol:"",timestamp:"",price:""},r="https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=".concat(s,"&interval=5min&outputsize=compact&apikey=N9SUKXTJE3657J9P"),t.next=4,fetch(r).then((function(e){return e.json()})).then((function(t){var s=Object.keys(t["Time Series (5min)"])[0],r=Object.values(t["Time Series (5min)"][s]);c.symbol=t["Meta Data"]["2. Symbol"],c.timestamp=s,c.price=r[3],a.push(c),3===++n&&e(a)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(m.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.stocksGet().then((function(e){console.log("here 2"),console.log(e),t.setState({stocks:e,stockStatus:"true"}),console.log(t.state.stocks)}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"container mt-3"},this.state.stockStatus?s.a.createElement("ul",{className:"list-group"},s.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center"},this.state.stocks[0].symbol,s.a.createElement("span",{className:"badge badge-primary badge-pill"},this.state.stocks[0].price),s.a.createElement("a",{href:"/",className:"btn btn-primary mr-3 pl-3 pr-3",onClick:function(t){e.buyStock(t,e.state.stocks[0].symbol,e.state.stocks[0].price)}},"Buy")),s.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center"},this.state.stocks[1].symbol,s.a.createElement("span",{className:"badge badge-primary badge-pill"},this.state.stocks[1].price),s.a.createElement("a",{href:"/",className:"btn btn-primary mr-3 pl-3 pr-3",onClick:function(t){e.buyStock(t,e.state.stocks[1].symbol,e.state.stocks[1].price)}},"Buy")),s.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center"},this.state.stocks[2].symbol,s.a.createElement("span",{className:"badge badge-primary badge-pill"},this.state.stocks[2].price),s.a.createElement("a",{href:"/",className:"btn btn-primary mr-3 pl-3 pr-3",onClick:function(t){e.buyStock(t,e.state.stocks[2].symbol,e.state.stocks[2].price)}},"Buy"))):s.a.createElement("ul",{className:"list-group"}),s.a.createElement("div",{className:"row mt-5 mb-5 justify-content-center"},s.a.createElement("div",{className:"col-3"},s.a.createElement("div",{className:"card",style:{width:"18rem"}},s.a.createElement("img",{className:"card-img-top",src:"https://i2.wp.com/airlinkflight.org/wp-content/uploads/2019/02/male-placeholder-image.jpeg?ssl=1",alt:"Card cap"}),this.state.loggedIn?s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title"},this.state.userID),s.a.createElement("h5",{className:"card-title"},"Balance: ",this.state.balance),s.a.createElement("p",{className:"card-text"}),s.a.createElement("div",{className:"text-center"},s.a.createElement("a",{href:"/",className:"btn btn-secondary pl-3 pr-3",onClick:this.refreshBalance},"Refresh Balance"),s.a.createElement("a",{href:"#",className:"btn btn-secondary pl-3 pr-3",onClick:this.signOut},"Sign Out"),s.a.createElement("br",null),s.a.createElement("a",{href:"#",className:"btn btn-secondary pl-3 pr-3",onClick:this.refreshStock},"Refresh Stocks"))):s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title"},"Sign In"),s.a.createElement("p",{className:"card-text"}),s.a.createElement("div",{className:"text-center"},s.a.createElement("form",{onSubmit:this.signIn},s.a.createElement("input",{type:"text",value:this.state.userID,name:"userID",placeholder:"Enter UserID here",onChange:this.handleChange}),s.a.createElement("br",null),s.a.createElement("button",{className:"mt-3 btn",type:"submit"},"Sign In")))))),s.a.createElement("div",{className:"d-flex justify-content-center ml-5 col-5"},this.state.loggedIn?s.a.createElement("div",{className:"card wid"},this.renderUserStocks()):s.a.createElement("div",{className:"card wid"})),s.a.createElement("div",{className:"justify-content-left col-3"},s.a.createElement("h2",null,"Send MiM"),s.a.createElement("h3",null,"Company Balance: ",this.state.companyBalance),s.a.createElement("form",{onSubmit:this.sendMiM},s.a.createElement("input",{type:"text",name:"sendUserId",value:this.state.sendUserId,placeholder:"Enter UserID here",onChange:this.handleChange,className:"mt-3"}),s.a.createElement("input",{type:"text",name:"amount",value:this.state.amount,placeholder:"Enter amount here",onChange:this.handleChange,className:"mt-3"}),s.a.createElement("button",{className:"mt-3 btn",type:"submit"},"Send")),s.a.createElement("h3",null,this.state.sendMimStatus)))))}}]),a}(n.Component),v=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={userID:"",response:""},e.handleChange=function(t){e.setState(Object(d.a)({},t.target.name,t.target.value)),console.log(e.state)},e.signUp=function(t){e.setState({response:""}),t.preventDefault();var a={userID:e.state.userID};console.log("payload"),console.log(a),E()({url:"/signUp",method:"post",data:a}).then((function(t){e.setState({response:t.data.success})})).catch((function(t){e.setState({response:t.response.data.error})}))},e}return Object(h.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"container"},s.a.createElement("form",{onSubmit:this.signUp},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"inputAddress"},"Username"),s.a.createElement("input",{type:"text",className:"form-control",id:"inputAddress",placeholder:"Jhon Doe",name:"userID",value:this.state.userID,onChange:this.handleChange})),s.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Sign up")),s.a.createElement("div",null,s.a.createElement("h3",null,this.state.response)))}}]),a}(n.Component);a(57);var k=function(){return s.a.createElement(l.a,null,s.a.createElement("div",null,s.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},s.a.createElement("ul",{className:"navbar-nav mr-auto"},s.a.createElement("li",null,s.a.createElement(l.b,{to:"/",className:"nav-link"}," Dashboard ")),s.a.createElement("li",null,s.a.createElement(l.b,{to:"/signup",className:"nav-link"},"Signup")))),s.a.createElement("h3",{className:"text-center mt-3"},"Ingenio CryptoStock App"),s.a.createElement(o.c,null,s.a.createElement(o.a,{exact:!0,path:"/",component:y}),s.a.createElement(o.a,{path:"/signup",component:v}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(l.a,null,s.a.createElement(k,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.5dff4d0e.chunk.js.map